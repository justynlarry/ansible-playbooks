---

- name: Bootstrap ansible management User
  hosts: test
  become: true
  become_user: root
  become_method: su
  gather_facts: true

  collections:
    - ansible.netcommon
    - ansible.utils
    - community.general

  vars:
    ansible_ssh_pass: "{{ vault_ansible_ssh_pass }}"
    ansible_become_pass: "{{ vault_ansible_ssh_pass }}"

  roles:
    - common
  tasks:
    - name: Include OS-Specific Role
      ansible.builtin.include_role:
        name: "{{ ansible_distribution | lower }}"
